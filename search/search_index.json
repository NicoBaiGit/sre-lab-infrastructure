{"config":{"lang":["fr"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Accueil","text":"SRE Lab Infrastructure      Plateforme d'apprentissage et d'exp\u00e9rimentation pour le Site Reliability Engineering.          Infrastructure as Code \u2022 Kubernetes \u2022 GitOps \u2022 Observabilit\u00e9    \ud83c\udfd7\ufe0f 00. Architecture <p>Vue d'ensemble du Lab, flux de donn\u00e9es, et strat\u00e9gie de centralisation NAS.</p> \ud83d\udcbb 01. Poste de Travail <p>Configuration de l'environnement de d\u00e9veloppement sur WSL2. Shell, Outils, et Automatisation.</p> \ud83d\udda5\ufe0f 02. Le Serveur <p>Installation et pr\u00e9paration du Lenovo T420. OS, R\u00e9seau, et S\u00e9curit\u00e9.</p> \ud83d\ude80 03. Guide du Lab <p>D\u00e9ploiement de Kubernetes (K3s), ArgoCD, et de la stack d'observabilit\u00e9.</p>"},{"location":"#contexte-du-lab","title":"\ud83c\udf0d Contexte du Lab","text":"<p>Ce projet vise \u00e0 cr\u00e9er une infrastructure SRE domestique robuste, centralis\u00e9e et reproductible.</p>"},{"location":"#materiel","title":"Mat\u00e9riel","text":"<ul> <li>Poste Principal : Lenovo T14 (Windows 11, 16Go RAM) h\u00e9bergeant plusieurs sessions WSL2.</li> <li>Serveur Lab : Lenovo T420 (Ubuntu Server) pour h\u00e9berger les charges de travail (K3s).</li> <li>Stockage Central : NAS Synology.</li> </ul>"},{"location":"#philosophie-centralisation-nas","title":"Philosophie : \"Centralisation NAS\"","text":"<p>L'objectif est d'avoir une exp\u00e9rience unifi\u00e9e sur toutes les machines (WSL, Serveurs, VM) :</p> <ul> <li>Configuration Unique : Les alias, le prompt (Starship) et les scripts sont stock\u00e9s sur le NAS.</li> <li>Bootstrap Universel : N'importe quelle machine peut rejoindre le lab en ex\u00e9cutant un script unique qui monte le NAS et configure le shell.</li> <li>Gestion \u00e0 distance : Le lab peut \u00eatre d\u00e9marr\u00e9 (WOL) et arr\u00eat\u00e9 depuis n'importe quel point du r\u00e9seau.</li> </ul>"},{"location":"#chronologie-de-mise-en-uvre-de-a-a-z","title":"\ud83d\udcc5 Chronologie de mise en \u0153uvre (De A \u00e0 Z)","text":"<p>Pour reconstruire ce lab depuis z\u00e9ro, suivez ces \u00e9tapes dans l'ordre :</p>"},{"location":"#1-initialisation-du-nas-le-cur","title":"1. Initialisation du NAS (Le C\u0153ur)","text":"<p>Le NAS doit \u00eatre op\u00e9rationnel et exposer un partage SMB (ex: <code>work</code>).</p>"},{"location":"#2-preparation-du-poste-de-travail-wsl","title":"2. Pr\u00e9paration du Poste de Travail (WSL)","text":"<p>C'est votre tour de contr\u00f4le.</p> <ul> <li>Action : Installer WSL sur le T14.</li> <li>Action : Cloner ce d\u00e9p\u00f4t Git.</li> <li>Action : Lancer le bootstrap (<code>scripts/common/bootstrap_client.sh</code>).<ul> <li>Effet : Ce script va monter le NAS (<code>/mnt/nas</code>) et configurer le shell.</li> </ul> </li> <li>Action : Initialiser le contenu du NAS (Premier d\u00e9ploiement).<ul> <li>Commande : <code>deploy_lab</code> (ou <code>./scripts/nas/deploy_to_nas.sh</code>)</li> <li>Note : \u00c0 faire une seule fois pour peupler le NAS vide.</li> </ul> </li> <li>Voir : 01. Poste de Travail</li> </ul>"},{"location":"#3-installation-du-serveur-t420","title":"3. Installation du Serveur (T420)","text":"<p>Le moteur du lab.</p> <ul> <li>Action : Installer Ubuntu Server sur le T420.</li> <li>Action : Configurer le r\u00e9seau et le SSH.</li> <li>Action : Lancer le bootstrap pour r\u00e9cup\u00e9rer la config commune (Alias, Starship).</li> <li>Voir : 02. Le Serveur</li> </ul>"},{"location":"#4-deploiement-du-lab-sre","title":"4. D\u00e9ploiement du Lab SRE","text":"<p>La couche applicative.</p> <ul> <li>Action : Installer K3s sur le T420.</li> <li>Action : D\u00e9ployer ArgoCD et la stack de monitoring.</li> <li>Voir : 03. Guide du Lab</li> </ul>"},{"location":"#demarrage-rapide-maintenance","title":"\u26a1 D\u00e9marrage Rapide (Maintenance)","text":"<p>Une fois le lab install\u00e9, voici les commandes courantes :</p> <p>=== \"Nouveau Client (WSL/Serveur)\"</p> <pre><code>```bash\n# 1. Cloner le repo (si pas fait)\ngit clone https://github.com/NicoBaiGit/sre-lab-infrastructure.git ~/github/sre-lab-infrastructure\n\n# 2. Lancer le bootstrap\n~/github/sre-lab-infrastructure/scripts/common/bootstrap_client.sh\n\n# 3. Recharger\nsource ~/.bashrc\n```\n</code></pre> <p>=== \"Mise \u00e0 jour NAS\"</p> <pre><code>```bash\n# Depuis votre poste principal\ndeploy_lab\n```\n</code></pre>"},{"location":"#technologies","title":"\ud83d\udee0\ufe0f Technologies","text":"<ul> <li>Orchestration : K3s</li> <li>GitOps : ArgoCD</li> <li>Monitoring : Prometheus, Grafana</li> <li>OS : Ubuntu Server 24.04, WSL2</li> <li>Shell : Bash, Starship</li> </ul>"},{"location":"architecture/","title":"Architecture du Lab SRE","text":"<pre><code>graph LR\n    %% --- Styles ---\n    classDef storage fill:#ffb3ba,stroke:#333,stroke-width:2px,color:black;\n    classDef container fill:none,stroke:#666,stroke-width:2px,stroke-dasharray: 5 5,color:black;\n    classDef logic fill:#baffc9,stroke:#333,stroke-width:2px,color:black;\n    classDef external fill:#bae1ff,stroke:#333,stroke-width:2px,color:black;\n\n    %% --- Nodes &amp; Groups ---\n    subgraph NAS_Zone [\"Zone Stockage\"]\n        direction TB\n        NAS[\"\ud83d\udcbe Synology NAS&lt;br/&gt;(Config Centrale)\"]:::storage\n    end\n\n    subgraph T14_Zone [\"PC Portable T14\"]\n        direction TB\n        WSL1[\"\ud83d\udcbb WSL Session 1\"]:::logic\n        WSL2[\"\ud83d\udcbb WSL Session 2\"]:::logic\n    end\n\n    subgraph T420_Zone [\"Serveur T420\"]\n        direction TB\n        USrv[\"\ud83d\ude80 Ubuntu Server&lt;br/&gt;(K3s / Lab)\"]:::logic\n    end\n\n    subgraph Ext_Zone [\"Ext\u00e9rieur\"]\n        Other[\"\ud83d\udcf1 Autres PC\"]:::external\n    end\n\n    %% --- Connections ---\n\n    %% Flux de Configuration (Le plus important)\n    NAS == \"Mount /mnt/nas&lt;br/&gt;+ Config (Alias/Starship)\" ==&gt; WSL1\n    NAS == \"Mount /mnt/nas&lt;br/&gt;+ Config (Alias/Starship)\" ==&gt; WSL2\n    NAS == \"Mount /mnt/nas&lt;br/&gt;+ Config (Alias/Starship)\" ==&gt; USrv\n\n    %% Acc\u00e8s Fichiers simple\n    NAS -.-&gt;|SMB| Other\n\n    %% Gestion / Contr\u00f4le\n    WSL1 --&gt;|SSH / WOL| USrv\n    WSL2 --&gt;|SSH / WOL| USrv\n    Other --&gt;|SSH| USrv\n\n    %% Styling des conteneurs physiques\n    class NAS_Zone,T14_Zone,T420_Zone,Ext_Zone container;</code></pre>"},{"location":"daily_memo/","title":"M\u00e9mo Quotidien - SRE Lab","text":"<p>Ce document regroupe les commandes et informations essentielles pour l'utilisation quotidienne du Lab.</p>"},{"location":"daily_memo/#demarrage-arret","title":"\ud83d\ude80 D\u00e9marrage / Arr\u00eat","text":"<ul> <li>D\u00e9marrer le Lab (WOL) : <code>start_lab</code> (Alias vers script WOL)</li> <li>Arr\u00eater le Lab : <code>bye</code> (Arr\u00eate les services et ferme la session) ou <code>stop_lab</code></li> <li>Connexion SSH : <code>ssh user@192.168.x.x</code> (ou via alias si configur\u00e9)</li> </ul>"},{"location":"daily_memo/#gestion-des-fichiers-nas","title":"\ud83d\udcc2 Gestion des Fichiers (NAS)","text":"<p>Le NAS est le point central. Il est mont\u00e9 sur <code>/mnt/nas</code> sur toutes les machines. Le montage est g\u00e9r\u00e9 automatiquement par <code>/etc/fstab</code> (configur\u00e9 par <code>bootstrap_client.sh</code>).</p> <ul> <li>Credentials : Stock\u00e9s dans <code>~/.smbcredentials</code> (chmod 600).</li> <li>Alias partag\u00e9s : <code>/mnt/nas/aliases.sh</code></li> <li>Config Starship : <code>/mnt/nas/starship.toml</code></li> <li>Scripts communs : <code>/mnt/nas/scripts/</code></li> </ul> <p>Pour mettre \u00e0 jour la configuration commune : 1.  Modifiez les fichiers dans votre repo Git local (<code>~/github/sre-lab-infrastructure</code>). 2.  Poussez vers le NAS : <code>deploy_lab</code></p>"},{"location":"daily_memo/#mise-a-jour-de-la-configuration","title":"Mise \u00e0 jour de la Configuration","text":""},{"location":"daily_memo/#1-mettre-a-jour-le-nas-depuis-le-poste-de-dev","title":"1. Mettre \u00e0 jour le NAS (Depuis le poste de Dev)","text":"<p>Si vous avez modifi\u00e9 des alias ou la config Starship dans le code source : 1.  <code>git pull</code> (pour \u00eatre \u00e0 jour) 2.  <code>deploy_lab</code> (alias pour <code>deploy_to_nas.sh</code>)</p>"},{"location":"daily_memo/#2-mettre-a-jour-un-client-wsl-serveur","title":"2. Mettre \u00e0 jour un Client (WSL, Serveur...)","text":"<p>Si vous voulez r\u00e9cup\u00e9rer la derni\u00e8re version des scripts ou r\u00e9parer la config sur une machine : <pre><code>cd ~/github/sre-lab-infrastructure\ngit pull\n./scripts/common/bootstrap_client.sh\n</code></pre> (Le script est idempotent : il peut \u00eatre relanc\u00e9 sans danger pour mettre \u00e0 jour fstab, installer les nouveaux outils comme keychain, etc.)</p>"},{"location":"daily_memo/#liste-des-alias-reference","title":"\ud83d\udee0\ufe0f Liste des Alias (R\u00e9f\u00e9rence)","text":"Cat\u00e9gorie Alias Commande Description Navigation <code>..</code> <code>cd ..</code> Remonter d'un niveau <code>...</code> <code>cd ../..</code> Remonter de 2 niveaux <code>ll</code> <code>ls -alF</code> Liste d\u00e9taill\u00e9e <code>la</code> <code>ls -A</code> Liste presque tout <code>l</code> <code>ls -CF</code> Liste simple Git <code>gs</code> <code>git status</code> Statut <code>ga</code> <code>git add</code> Ajouter <code>gc</code> <code>git commit</code> Commiter <code>gp</code> <code>git push</code> Pousser <code>gl</code> <code>git log ...</code> Historique graphique Kubernetes <code>k</code> <code>kubectl</code> Base <code>kcc</code> <code>kubectl config current-context</code> Contexte actuel <code>kg</code> <code>kubectl get</code> Get <code>kgp</code> <code>kubectl get pods</code> Pods <code>kgs</code> <code>kubectl get services</code> Services <code>kga</code> <code>kubectl get all -A</code> Tout (tous namespaces) <code>kd</code> <code>kubectl describe</code> D\u00e9crire <code>kl</code> <code>kubectl logs</code> Logs <code>kex</code> <code>kubectl exec -it</code> Shell dans pod Syst\u00e8me <code>update</code> <code>apt update &amp;&amp; upgrade</code> Mise \u00e0 jour APT <code>nano</code> <code>vim</code> Force l'habitude VIM ;) Lab SRE <code>start_lab</code> <code>/mnt/nas/start_lab.sh</code> D\u00e9marrer (WOL) <code>bye</code> <code>stop_lab; exit</code> Arr\u00eater et quitter <code>deploy_lab</code> <code>.../deploy_to_nas.sh</code> D\u00e9ployer config sur NAS"},{"location":"daily_memo/#kubernetes-k3s","title":"\u2638\ufe0f Kubernetes (k3s)","text":"<ul> <li>Context : <code>kuc &lt;context&gt;</code> pour changer de cluster.</li> <li>Logs : <code>kl &lt;pod&gt;</code></li> <li>Shell dans pod : <code>kex &lt;pod&gt; -- /bin/bash</code></li> </ul>"},{"location":"daily_memo/#en-cas-de-probleme","title":"\ud83c\udd98 En cas de probl\u00e8me","text":"<ol> <li> <p>Le prompt ne s'affiche pas bien ?</p> <ul> <li>V\u00e9rifiez que <code>/mnt/nas</code> est bien mont\u00e9.</li> <li>Lancez <code>source ~/.bashrc</code>.</li> </ul> </li> <li> <p>Les alias ne fonctionnent pas ?</p> <ul> <li>V\u00e9rifiez si le fichier <code>/mnt/nas/aliases.sh</code> existe.</li> <li>Relancez le d\u00e9ploiement : <code>deploy_lab</code>.</li> </ul> </li> <li> <p>Probl\u00e8me de droits (sudo) ?</p> <ul> <li>Relancez le script de bootstrap : <code>sudo ./bootstrap_client.sh</code>.</li> </ul> </li> </ol>"},{"location":"setup-lab/","title":"Guide de Configuration du Lab SRE","text":"<p>Ce guide d\u00e9taille les \u00e9tapes pour transformer un mat\u00e9riel standard en une plateforme d'apprentissage SRE compl\u00e8te.</p>"},{"location":"setup-lab/#etape-1-le-socle-infrastructure-bare-metal","title":"\u00c9tape 1 : Le Socle Infrastructure (Bare Metal)","text":"<p>La premi\u00e8re \u00e9tape consiste \u00e0 pr\u00e9parer la machine physique qui h\u00e9bergera nos services.</p> <ul> <li>OS : Ubuntu Server 24.04 LTS.</li> <li>Machine : Lenovo ThinkPad T420.</li> <li>Configuration : Headless (sans \u00e9cran), acc\u00e8s SSH uniquement.</li> </ul> <p>\ud83d\udc49 Voir le guide d\u00e9taill\u00e9 d'installation du serveur</p>"},{"location":"setup-lab/#etape-2-lorchestrateur-kubernetes","title":"\u00c9tape 2 : L'Orchestrateur (Kubernetes)","text":"<p>Nous utilisons K3s, une distribution Kubernetes l\u00e9g\u00e8re certifi\u00e9e, id\u00e9ale pour le Edge et les labs.</p>"},{"location":"setup-lab/#installation-de-k3s","title":"Installation de K3s","text":"<p>Nous installons K3s en mode permissif pour le fichier de configuration (<code>644</code>), ce qui permet \u00e0 l'utilisateur standard de lire la configuration sans \u00eatre root.</p> <pre><code>curl -sfL https://get.k3s.io | INSTALL_K3S_EXEC=\"--write-kubeconfig-mode 644\" sh -\n</code></pre> <p>Ensuite, configurez l'acc\u00e8s pour l'utilisateur courant via un lien symbolique (pour b\u00e9n\u00e9ficier automatiquement des mises \u00e0 jour de certificats) :</p> <pre><code>mkdir -p ~/.kube\nln -s /etc/rancher/k3s/k3s.yaml ~/.kube/config\n</code></pre> <p>V\u00e9rification : <pre><code>kubectl get nodes\n</code></pre></p>"},{"location":"setup-lab/#etape-3-gitops-avec-argocd","title":"\u00c9tape 3 : GitOps avec ArgoCD","text":"<p>Pour pratiquer le SRE moderne, nous ne d\u00e9ployons rien manuellement. Nous utilisons ArgoCD.</p> <ol> <li>Installer ArgoCD dans le cluster K3s.</li> <li>Connecter un repo Git contenant les manifestes Kubernetes.</li> <li>Sync : ArgoCD d\u00e9ploie automatiquement les changements pouss\u00e9s sur Git.</li> </ol>"},{"location":"setup-lab/#acces-aux-applications-dns-ingress","title":"Acc\u00e8s aux Applications (DNS &amp; Ingress)","text":"<p>Pour acc\u00e9der aux services (ArgoCD, Grafana, etc.) via des URLs conviviales comme <code>https://argocd.local</code>, nous utilisons un Ingress Controller (Traefik, inclus dans K3s).</p> <p>Configuration Client :</p> <p>Le script <code>start_lab.sh</code> configure automatiquement le fichier <code>/etc/hosts</code> sur votre machine Linux/WSL. Cependant, si vous utilisez un navigateur sur Windows, vous devez ajouter manuellement l'entr\u00e9e suivante dans <code>C:\\Windows\\System32\\drivers\\etc\\hosts</code> (en tant qu'Administrateur) :</p> <pre><code>192.168.1.120 argocd.local grafana.local prometheus.local loki.local\n</code></pre>"},{"location":"setup-lab/#etape-4-observabilite-monitoring-logging","title":"\u00c9tape 4 : Observabilit\u00e9 (Monitoring &amp; Logging)","text":"<p>Un SRE doit voir ce qui se passe.</p> <ul> <li>Prometheus : Collecte des m\u00e9triques.</li> <li>Grafana : Visualisation (Dashboards).</li> <li>Loki : Agr\u00e9gation des logs.</li> </ul>"},{"location":"setup-lab/#etape-5-automatisation-ansibleterraform","title":"\u00c9tape 5 : Automatisation (Ansible/Terraform)","text":"<ul> <li>Utiliser Ansible pour la configuration de l'OS (post-installation).</li> <li>Utiliser Terraform si nous \u00e9tendons le lab vers le Cloud (AWS/GCP) ou pour g\u00e9rer des ressources Proxmox.</li> </ul>"},{"location":"ubuntu-server/","title":"Configuration du Serveur Ubuntu (T420)","text":"<p>Ce document r\u00e9sume la proc\u00e9dure d'installation et de configuration d'Ubuntu Server 24.04 LTS sur un Lenovo ThinkPad T420.</p>"},{"location":"ubuntu-server/#1-preparation-du-media-dinstallation","title":"1. Pr\u00e9paration du m\u00e9dia d'installation","text":"<ul> <li>Source : T\u00e9l\u00e9charger l'ISO Ubuntu Server 24.04 LTS.</li> <li>Outil : Utiliser Rufus ou BalenaEtcher pour cr\u00e9er la cl\u00e9 USB bootable.<ul> <li>Astuce T420 : Si le boot \u00e9choue, refaire la cl\u00e9 avec Rufus en sch\u00e9ma de partition MBR (pour BIOS/Legacy).</li> </ul> </li> </ul>"},{"location":"ubuntu-server/#2-configuration-du-bios-t420","title":"2. Configuration du BIOS (T420)","text":"<p>Le T420 \u00e9tant une machine ancienne, le BIOS peut \u00eatre capricieux.</p> <ol> <li>Acc\u00e8s : Touche <code>F1</code> au d\u00e9marrage.</li> <li>Startup &gt; UEFI/Legacy Boot : R\u00e9gler sur <code>Both</code> ou <code>UEFI Only</code> (avec <code>UEFI First</code>).</li> <li>Boot Order : Remonter <code>USB HDD</code> en premier.</li> <li>Ports USB : Utiliser les ports lat\u00e9raux ou arri\u00e8re (\u00e9viter le port jaune \"Always On\").</li> </ol>"},{"location":"ubuntu-server/#3-installation-de-los","title":"3. Installation de l'OS","text":"<p>D\u00e9marrer sur la cl\u00e9 (<code>F12</code>) et suivre l'installeur :</p> <ul> <li>Type : Ubuntu Server (standard, pas minimized).</li> <li>R\u00e9seau : Ethernet filaire (DHCP).</li> <li>Stockage : \"Use an entire disk\" (Attention, efface tout).</li> <li>SSH : Cocher \"Install OpenSSH Server\".</li> <li>Snaps optionnels : Ne rien cocher (pas de MicroK8s, pas de Nextcloud...).     Nous installerons nos propres outils pour ma\u00eetriser les ressources.</li> </ul>"},{"location":"ubuntu-server/#4-configuration-post-installation-depuis-le-poste-client","title":"4. Configuration Post-Installation (Depuis le poste client)","text":"<p>Une fois le serveur red\u00e9marr\u00e9, tout se g\u00e8re depuis votre poste de travail (ex: T14) via SSH.</p>"},{"location":"ubuntu-server/#connexion-ssh-sans-mot-de-passe","title":"Connexion SSH sans mot de passe","text":"<p>Pour faciliter l'administration, configurez l'acc\u00e8s SSH sans mot de passe depuis votre poste client (voir la documentation WSL pour les d\u00e9tails complets).</p> <pre><code># Exemple rapide (depuis votre poste client)\nssh-copy-id -i ~/.ssh/nicolas.bailleul.wrk nicoperso@192.168.1.15\n</code></pre>"},{"location":"ubuntu-server/#configuration-de-lenvironnement-starship-alias","title":"Configuration de l'environnement (Starship + Alias)","text":"<p>Nous utilisons le m\u00eame script de Bootstrap que pour WSL. Il va monter le NAS et configurer le shell.</p> <pre><code># Cloner le repo (ou le mettre \u00e0 jour s'il existe d\u00e9j\u00e0)\nif [ -d ~/github/sre-lab-infrastructure ]; then\n    cd ~/github/sre-lab-infrastructure &amp;&amp; git pull\nelse\n    git clone https://github.com/NicoBaiGit/sre-lab-infrastructure.git ~/github/sre-lab-infrastructure\nfi\n\n# Lancer le bootstrap\n~/github/sre-lab-infrastructure/scripts/common/bootstrap_client.sh\n\n# Recharger le shell\nsource ~/.bashrc\n</code></pre> <p>Astuce : Une fois cette configuration initiale faite, vous pourrez simplement taper <code>reload</code> pour mettre \u00e0 jour votre environnement (alias, prompt) et recharger la configuration.</p> <p>Ce script va : 1.  Monter le NAS sur <code>/mnt/nas</code> (et configurer <code>/etc/fstab</code>). 2.  Installer Starship. 3.  Configurer les alias partag\u00e9s. 4.  Configurer <code>.bashrc</code> pour utiliser la configuration centralis\u00e9e sur le NAS.</p>"},{"location":"ubuntu-server/#script-dinitialisation-systeme-init-t420sh","title":"Script d'initialisation syst\u00e8me (init-t420.sh)","text":"<p>Pour les outils syst\u00e8me de base (avant l'environnement shell), vous pouvez utiliser ce script :</p> <pre><code># Lancer le script d'initialisation\n~/github/sre-lab-infrastructure/scripts/server/init-t420.sh\n</code></pre> <p>Ce script installe <code>curl</code>, <code>git</code>, <code>htop</code>, <code>vim</code>, <code>neofetch</code> et d\u00e9sactive le Swap.</p>"},{"location":"ubuntu-server/#5-optimisation-headless-laptop-server","title":"5. Optimisation \"Headless\" (Laptop Server)","text":"<p>Pour utiliser le portable comme un serveur (capot ferm\u00e9, \u00e9cran \u00e9teint, \u00e9conomie d'\u00e9nergie).</p>"},{"location":"ubuntu-server/#ignorer-la-fermeture-du-capot","title":"Ignorer la fermeture du capot","text":"<p>M\u00e9thode 1 (Standard) : \u00c9diter <code>/etc/systemd/logind.conf</code> :</p> <p><pre><code>HandleLidSwitch=ignore\nHandleLidSwitchExternalPower=ignore\nHandleLidSwitchDocked=ignore\n</code></pre> Puis : <code>sudo systemctl restart systemd-logind</code></p> <p>M\u00e9thode 2 (Radicale - Si la m\u00e9thode 1 \u00e9choue) : Si le T420 s'obstine \u00e0 dormir (LED lune allum\u00e9e), d\u00e9sactivez totalement la capacit\u00e9 de mise en veille du syst\u00e8me :</p> <p><pre><code>sudo systemctl mask sleep.target suspend.target hibernate.target hybrid-sleep.target\n</code></pre> Pour revenir en arri\u00e8re un jour : remplacer <code>mask</code> par <code>unmask</code>.</p>"},{"location":"ubuntu-server/#eteindre-lecran-console-blanking","title":"\u00c9teindre l'\u00e9cran (Console Blanking)","text":"<p>\u00c9diter <code>/etc/default/grub</code> et modifier la ligne :</p> <p><pre><code>GRUB_CMDLINE_LINUX_DEFAULT=\"quiet splash consoleblank=60\"\n</code></pre> Puis : <code>sudo update-grub</code> et red\u00e9marrer.</p>"},{"location":"ubuntu-server/#desactiver-les-radios-wi-fi-bluetooth","title":"D\u00e9sactiver les radios (Wi-Fi / Bluetooth)","text":"<p>Pour \u00e9conomiser de l'\u00e9nergie et \u00e9viter les interf\u00e9rences, il est recommand\u00e9 de couper les radios inutilis\u00e9es sur un serveur connect\u00e9 en Ethernet.</p> <ol> <li> <p>Installer rfkill (si absent) :     <pre><code>sudo apt update &amp;&amp; sudo apt install -y rfkill\n</code></pre></p> </li> <li> <p>Couper le Wi-Fi et le Bluetooth :     <pre><code>sudo rfkill block wifi\nsudo rfkill block bluetooth\n</code></pre></p> </li> <li> <p>V\u00e9rifier l'\u00e9tat :     <pre><code>rfkill list\n</code></pre> (Vous devez voir <code>Soft blocked: yes</code> pour Wireless LAN et Bluetooth).</p> </li> </ol>"},{"location":"ubuntu-server/#6-montage-nas-securise-pour-alias-data","title":"6. Montage NAS S\u00e9curis\u00e9 (Pour Alias &amp; Data)","text":"<p>Pour acc\u00e9der \u00e0 des fichiers partag\u00e9s (ex: scripts d'alias centralis\u00e9s) de mani\u00e8re s\u00e9curis\u00e9e.</p>"},{"location":"ubuntu-server/#installation-des-outils","title":"Installation des outils","text":"<pre><code>sudo apt-get update &amp;&amp; sudo apt-get install -y cifs-utils\n</code></pre>"},{"location":"ubuntu-server/#securisation-des-identifiants","title":"S\u00e9curisation des identifiants","text":"<p>Ne jamais mettre de mot de passe en clair dans <code>/etc/fstab</code>. Utilisez un fichier de credentials prot\u00e9g\u00e9.</p> <p>Bonne pratique : Cr\u00e9ez un utilisateur d\u00e9di\u00e9 sur votre NAS (ex: <code>svc_linux</code>) avec des droits limit\u00e9s uniquement au dossier partag\u00e9 <code>work</code> (lecture seule ou lecture/\u00e9criture selon besoin), plut\u00f4t que d'utiliser votre compte administrateur principal.</p> <ol> <li>Cr\u00e9er le fichier :     <pre><code>nano ~/.smbcredentials\n</code></pre></li> <li>Ajouter le contenu :     <pre><code>username=svc_linux\npassword=votre_mot_de_passe_dedie\ndomain=WORKGROUP\n</code></pre></li> <li>Prot\u00e9ger le fichier (lecture seule pour vous uniquement) :     <pre><code>chmod 600 ~/.smbcredentials\n</code></pre></li> </ol>"},{"location":"ubuntu-server/#configuration-du-montage-fstab","title":"Configuration du montage (fstab)","text":"<ol> <li> <p>Cr\u00e9er le point de montage :     <pre><code>sudo mkdir -p /mnt/nas\n</code></pre></p> </li> <li> <p>\u00c9diter fstab :     <pre><code>sudo nano /etc/fstab\n</code></pre>     Ajouter la ligne suivante (remplacez l'IP et le chemin) :     <pre><code>//192.168.1.2/work /mnt/nas cifs credentials=/home/votre_user/.smbcredentials,iocharset=utf8,vers=3.0,noperm 0 0\n</code></pre></p> </li> <li> <p>Tester :     <pre><code>sudo mount -a\nls /mnt/nas\n</code></pre></p> </li> </ol>"},{"location":"ubuntu-server/#chargement-des-alias","title":"Chargement des Alias","text":"<p>Ajoutez le m\u00eame bloc de code dans votre <code>.bashrc</code> que pour WSL (voir section WSL) pour charger <code>alias.sh</code>.</p>"},{"location":"ubuntu-server/#7-configuration-wake-on-lan-requis","title":"7. Configuration Wake-on-LAN (Requis)","text":"<p>Pour que les scripts de d\u00e9marrage (<code>start_lab.sh</code>) fonctionnent, le Wake-on-LAN (WoL) doit \u00eatre correctement configur\u00e9 sur le serveur.</p> <p>\u26a0\ufe0f Important : Le Wake-on-LAN (WoL) n\u00e9cessite imp\u00e9rativement une connexion Ethernet filaire. Le Wi-Fi du T420 ne supporte pas le r\u00e9veil depuis l'extinction compl\u00e8te.</p>"},{"location":"ubuntu-server/#1-configuration-reseau-ethernet-wi-fi","title":"1. Configuration R\u00e9seau (Ethernet + Wi-Fi)","text":"<p>Si vous avez install\u00e9 Ubuntu en Wi-Fi, l'interface Ethernet est peut-\u00eatre inactive. Il faut la configurer via Netplan pour qu'elle obtienne une IP (n\u00e9cessaire pour le WoL).</p> <p>\u00c9diter le fichier de config (ex: <code>/etc/netplan/50-cloud-init.yaml</code>) : <pre><code>network:\n    version: 2\n    ethernets:\n        enp0s25:\n            dhcp4: true\n            optional: true\n    wifis:\n        wlp3s0:\n            # ... votre config wifi existante ...\n</code></pre> Puis appliquer : <code>sudo netplan apply</code>.</p>"},{"location":"ubuntu-server/#2-configuration-du-bios-t420_1","title":"2. Configuration du BIOS (T420)","text":"<ul> <li>Red\u00e9marrer et appuyer sur <code>F1</code>.</li> <li>Aller dans Config &gt; Network &gt; Wake On LAN.</li> <li>R\u00e9gler sur AC and Battery (ou AC Only).</li> <li>Sauvegarder (<code>F10</code>).</li> </ul>"},{"location":"ubuntu-server/#3-configuration-ubuntu-persistante","title":"3. Configuration Ubuntu (Persistante)","text":"<p>Par d\u00e9faut, Ubuntu peut d\u00e9sactiver le WoL au prochain red\u00e9marrage. Il faut le forcer.</p> <ul> <li> <p>V\u00e9rifier l'\u00e9tat actuel :     <pre><code>sudo ethtool enp0s25 | grep Wake-on\n# Doit afficher : Wake-on: g\n</code></pre></p> </li> <li> <p>Activer et rendre persistant :     Cr\u00e9er un service systemd : <code>sudo nano /etc/systemd/system/wol.service</code></p> <pre><code>[Unit]\nDescription=Enable Wake-on-LAN\nAfter=network.target\n\n[Service]\nType=oneshot\nExecStart=/sbin/ethtool -s enp0s25 wol g\n\n[Install]\nWantedBy=multi-user.target\n</code></pre> </li> <li> <p>Activer le service :     <pre><code>sudo systemctl daemon-reload\nsudo systemctl enable wol.service\nsudo systemctl start wol.service\n</code></pre></p> </li> </ul>"},{"location":"ubuntu-server/#8-installation-de-kubernetes-k3s","title":"8. Installation de Kubernetes (K3s)","text":"<p>Installation en une commande (plus l\u00e9ger que MicroK8s) :</p> <pre><code>curl -sfL https://get.k3s.io | sh -\n</code></pre> <p>V\u00e9rification : <code>sudo kubectl get nodes</code></p>"},{"location":"vault-setup/","title":"Configuration de Vault et External Secrets","text":"<p>Ce guide d\u00e9taille les \u00e9tapes manuelles n\u00e9cessaires pour initialiser Vault et le configurer pour fonctionner avec External Secrets Operator dans le cluster Kubernetes.</p>"},{"location":"vault-setup/#1-initialisation-de-vault","title":"1. Initialisation de Vault","text":"<p>Une fois l'application Vault d\u00e9ploy\u00e9e par ArgoCD, le pod sera en \u00e9tat \"Running\" mais non pr\u00eat car il est scell\u00e9 (sealed).</p>"},{"location":"vault-setup/#initialiser-le-coffre","title":"Initialiser le coffre","text":"<p>Ex\u00e9cuter la commande suivante pour g\u00e9n\u00e9rer les cl\u00e9s de d\u00e9chiffrement (Unseal Keys) et le Token Root. \u26a0\ufe0f IMPORTANT : Sauvegardez ces informations pr\u00e9cieusement (ex: gestionnaire de mots de passe).</p> <pre><code>kubectl exec -ti vault-0 -n security -- vault operator init\n</code></pre>"},{"location":"vault-setup/#deverrouiller-unseal-vault","title":"D\u00e9verrouiller (Unseal) Vault","text":"<p>Vault a besoin de 3 cl\u00e9s (par d\u00e9faut) pour \u00eatre d\u00e9verrouill\u00e9. R\u00e9p\u00e9tez la commande suivante 3 fois avec 3 cl\u00e9s diff\u00e9rentes obtenues \u00e0 l'\u00e9tape pr\u00e9c\u00e9dente.</p> <pre><code>kubectl exec -ti vault-0 -n security -- vault operator unseal &lt;UNSEAL_KEY_1&gt;\nkubectl exec -ti vault-0 -n security -- vault operator unseal &lt;UNSEAL_KEY_2&gt;\nkubectl exec -ti vault-0 -n security -- vault operator unseal &lt;UNSEAL_KEY_3&gt;\n</code></pre>"},{"location":"vault-setup/#2-configuration-de-lintegration-kubernetes","title":"2. Configuration de l'Int\u00e9gration Kubernetes","text":"<p>Une fois Vault d\u00e9verrouill\u00e9, il faut configurer l'authentification pour que les pods Kubernetes (via External Secrets) puissent lire les secrets.</p> <p>Connectez-vous au pod Vault : <pre><code>kubectl exec -ti vault-0 -n security -- sh\n</code></pre></p> <p>Dans le shell du pod, ex\u00e9cutez les commandes suivantes :</p>"},{"location":"vault-setup/#connexion-admin","title":"Connexion Admin","text":"<pre><code># Utilisez le Root Token obtenu lors de l'initialisation\nexport VAULT_TOKEN=&lt;ROOT_TOKEN&gt;\n</code></pre>"},{"location":"vault-setup/#activer-le-moteur-de-secrets-kv-v2","title":"Activer le moteur de secrets KV v2","text":"<pre><code>vault secrets enable -path=secret kv-v2\n</code></pre>"},{"location":"vault-setup/#creer-le-secret-pour-grafana","title":"Cr\u00e9er le secret pour Grafana","text":"<p>C'est ici que l'on d\u00e9finit le mot de passe admin de Grafana. <pre><code>vault kv put secret/grafana password=\"MonSuperMotDePasseAdmin\"\n</code></pre></p>"},{"location":"vault-setup/#activer-lauthentification-kubernetes","title":"Activer l'authentification Kubernetes","text":"<pre><code>vault auth enable kubernetes\n\nvault write auth/kubernetes/config \\\n    kubernetes_host=\"https://$KUBERNETES_PORT_443_TCP_ADDR:443\"\n</code></pre>"},{"location":"vault-setup/#creer-la-politique-de-lecture-policy","title":"Cr\u00e9er la politique de lecture (Policy)","text":"<p>Cette politique autorise la lecture des secrets dans le chemin <code>secret/data/*</code>.</p> <pre><code>vault policy write external-secrets - &lt;&lt;EOF\npath \"secret/data/*\" {\n  capabilities = [\"read\"]\n}\nEOF\n</code></pre>"},{"location":"vault-setup/#creer-le-role-kubernetes","title":"Cr\u00e9er le r\u00f4le Kubernetes","text":"<p>Ce r\u00f4le lie le ServiceAccount <code>external-secrets</code> (dans le namespace <code>security</code>) \u00e0 la politique cr\u00e9\u00e9e ci-dessus.</p> <pre><code>vault write auth/kubernetes/role/external-secrets \\\n    bound_service_account_names=external-secrets \\\n    bound_service_account_namespaces=security \\\n    policies=external-secrets \\\n    ttl=24h\n</code></pre>"},{"location":"vault-setup/#3-verification","title":"3. V\u00e9rification","text":"<p>Une fois ces \u00e9tapes termin\u00e9es : 1. L'op\u00e9rateur External Secrets va s'authentifier aupr\u00e8s de Vault. 2. Il va lire le secret <code>secret/grafana</code>. 3. Il va cr\u00e9er un secret Kubernetes natif nomm\u00e9 <code>grafana-admin</code> dans le namespace <code>monitoring</code>. 4. Grafana utilisera ce secret pour d\u00e9finir le mot de passe de l'utilisateur <code>admin</code>.</p> <p>Vous pouvez v\u00e9rifier la cr\u00e9ation du secret avec : <pre><code>kubectl get secret grafana-admin -n monitoring\n</code></pre></p>"},{"location":"workstation-management/","title":"Gestion de l'Environnement de Travail (SRE Workstation)","text":"<p>Ce guide explique comment g\u00e9rer, d\u00e9ployer et synchroniser votre environnement de travail (Shell, Alias, Outils) sur plusieurs machines (WSL, Serveurs Linux, VM) de mani\u00e8re centralis\u00e9e via un NAS.</p>"},{"location":"workstation-management/#1-architecture-de-la-configuration","title":"1. Architecture de la Configuration","text":"<p>L'objectif est d'avoir une exp\u00e9rience unifi\u00e9e (m\u00eame prompt, m\u00eames alias) quel que soit le terminal utilis\u00e9.</p> <ul> <li>Source de V\u00e9rit\u00e9 : Ce d\u00e9p\u00f4t Git (<code>sre-lab-infrastructure</code>).</li> <li>Point de Distribution : Votre NAS (dossier partag\u00e9 <code>/work</code>).</li> <li>Clients : Vos instances WSL, vos serveurs Linux, vos VMs.</li> <li>Automatisation : Un script unique <code>bootstrap_client.sh</code> g\u00e8re la configuration de chaque client.</li> </ul>"},{"location":"workstation-management/#2-workflow-de-mise-a-jour","title":"2. Workflow de Mise \u00e0 Jour","text":"<p>Toute modification de configuration (nouvel alias, changement de th\u00e8me Starship) doit suivre ce cycle :</p> <ol> <li>Modifier le fichier dans ce d\u00e9p\u00f4t (ex: <code>shell/aliases.sh</code>).</li> <li>Tester localement.</li> <li>Commiter &amp; Pousser sur Git.</li> <li>D\u00e9ployer sur le NAS depuis votre poste principal :     <pre><code>deploy_lab\n</code></pre></li> </ol>"},{"location":"workstation-management/#3-installation-sur-une-nouvelle-machine","title":"3. Installation sur une Nouvelle Machine","text":"<p>Gr\u00e2ce au script de bootstrap universel, l'installation est standardis\u00e9e.</p>"},{"location":"workstation-management/#methode-recommandee-git","title":"M\u00e9thode Recommand\u00e9e (Git)","text":"<p>Si la machine a acc\u00e8s \u00e0 Internet et Git :</p> <ol> <li>Cloner le d\u00e9p\u00f4t :     <pre><code>git clone https://github.com/NicoBaiGit/sre-lab-infrastructure.git ~/github/sre-lab-infrastructure\n</code></pre></li> <li>Lancer le bootstrap :     <pre><code>~/github/sre-lab-infrastructure/scripts/common/bootstrap_client.sh\n</code></pre></li> </ol>"},{"location":"workstation-management/#methode-alternative-sans-git-offline","title":"M\u00e9thode Alternative (Sans Git / Offline)","text":"<p>Si la machine a acc\u00e8s au NAS mais pas \u00e0 Git, ou pour un d\u00e9ploiement rapide :</p> <ol> <li>Monter le NAS (si ce n'est pas d\u00e9j\u00e0 fait) ou copier le script via SCP.</li> <li>Lancer le script directement depuis le NAS :     <pre><code>/mnt/nas/bootstrap_client.sh\n</code></pre></li> </ol> <p>Ce que fait le script (Automatis\u00e9) : *   Configure <code>sudo</code> sans mot de passe (pour le lab). *   Monte le NAS automatiquement (<code>cifs</code> ou <code>drvfs</code> selon l'OS). *   Installe <code>keychain</code> pour g\u00e9rer vos cl\u00e9s SSH. *   Configure <code>.bashrc</code> pour charger les alias et Starship depuis le NAS.</p>"},{"location":"workstation-management/#4-mises-a-jour-des-clients","title":"4. Mises \u00e0 jour des Clients","text":"<p>Pour mettre \u00e0 jour la configuration sur n'importe quel client (r\u00e9cup\u00e9rer les nouveaux alias, etc.) :</p> <pre><code>reload\n</code></pre> <p>Note : Cet alias ex\u00e9cute <code>git pull</code> (si applicable) et relance le script de bootstrap pour s'assurer que tout est conforme.</p>"},{"location":"workstation-management/#5-gestion-ssh-semi-automatisee","title":"5. Gestion SSH (Semi-Automatis\u00e9e)","text":"<p>La gestion des agents SSH est automatis\u00e9e via <code>keychain</code> (install\u00e9 par le script). Vous ne taperez votre mot de passe de cl\u00e9 qu'une seule fois par red\u00e9marrage.</p>"},{"location":"workstation-management/#action-manuelle-requise","title":"Action Manuelle Requise","text":"<p>Le script ne peut pas deviner sur quels serveurs vous voulez vous connecter. Vous devez donc propager votre cl\u00e9 publique une seule fois vers chaque nouveau serveur cible :</p> <pre><code>ssh-copy-id user@mon-nouveau-serveur\n</code></pre> <p>Une fois cela fait, la connexion sera automatique gr\u00e2ce \u00e0 l'agent.</p>"},{"location":"workstation-management/#6-recapitulatif-des-commandes","title":"6. R\u00e9capitulatif des Commandes","text":"Action Commande Contexte Mettre \u00e0 jour le NAS <code>deploy_lab</code> Poste Principal (apr\u00e8s modif Git) Mettre \u00e0 jour un client <code>reload</code> N'importe quel client D\u00e9marrer le Lab <code>start_lab</code> Allume le serveur (WOL) Arr\u00eater le Lab <code>bye</code> \u00c9teint le serveur proprement"},{"location":"workstation-management/#7-bonnes-pratiques","title":"7. Bonnes Pratiques","text":"<ul> <li>Ne modifiez jamais les fichiers directement sur le NAS. Ils seront \u00e9cras\u00e9s au prochain <code>deploy_lab</code>.</li> <li>Alias Locaux : Si vous avez besoin d'alias sp\u00e9cifiques \u00e0 une machine, mettez-les dans <code>~/.bash_aliases</code>. Ils seront charg\u00e9s avant la configuration commune.</li> </ul>"},{"location":"wsl/","title":"Configuration WSL pour SRE","text":"<p>Cette page documente les bonnes pratiques et la configuration recommand\u00e9e pour un environnement de travail WSL (Windows Subsystem for Linux) optimis\u00e9 pour un SRE.</p>"},{"location":"wsl/#1-prerequis-et-optimisation","title":"1. Pr\u00e9requis et Optimisation","text":"<p>Avant de lancer la configuration logicielle, il est recommand\u00e9 d'optimiser l'instance WSL.</p>"},{"location":"wsl/#optimisation-ram","title":"Optimisation RAM","text":"<p>Par d\u00e9faut, WSL peut consommer une grande partie de la RAM disponible sur l'h\u00f4te Windows. Comme le T14 est utilis\u00e9 principalement comme poste de pilotage (SSH, Kubectl, Git) et que les charges lourdes tournent sur le T420, nous pouvons limiter WSL pour laisser des ressources \u00e0 Windows (Teams, Navigateur).</p> <p>Recommandation pour 16 Go de RAM totale : *   4GB : Suffisant pour du pilotage pur. *   6GB : Confortable (permet de lancer quelques conteneurs Docker de test localement).</p> <p>Fichier : <code>C:\\Users\\VotreUtilisateur\\.wslconfig</code> <pre><code>[wsl2]\nmemory=6GB\n</code></pre></p> <p>Red\u00e9marrez WSL : <code>wsl --shutdown</code></p>"},{"location":"wsl/#2-installation-initiale","title":"2. Installation Initiale","text":"<p>Pour r\u00e9cup\u00e9rer le script d'automatisation, nous avons besoin de Git.</p> <pre><code>sudo apt-get update &amp;&amp; sudo apt-get install -y git\n</code></pre>"},{"location":"wsl/#3-configuration-automatisee-recommande","title":"3. Configuration Automatis\u00e9e (Recommand\u00e9)","text":"<p>Nous utilisons un script de Bootstrap universel qui connecte votre machine (WSL, VM Linux, Serveur) au NAS centralis\u00e9 et configure tout l'environnement.</p> <p>Ce script d\u00e9tecte automatiquement l'environnement et va :</p> <ul> <li>Monter le NAS (<code>/mnt/nas</code>) automatiquement (via <code>drvfs</code> sur WSL).</li> <li>Installer Starship (Prompt moderne).</li> <li>Configurer votre <code>.bashrc</code> pour charger les alias et la config depuis le NAS.</li> <li>Installer Keychain pour g\u00e9rer vos cl\u00e9s SSH.</li> </ul>"},{"location":"wsl/#procedure","title":"Proc\u00e9dure","text":"<ol> <li> <p>R\u00e9cup\u00e9rer le code :     <pre><code># Cloner (ou mettre \u00e0 jour)\nif [ -d ~/github/sre-lab-infrastructure ]; then\n    cd ~/github/sre-lab-infrastructure &amp;&amp; git pull\nelse\n    git clone https://github.com/NicoBaiGit/sre-lab-infrastructure.git ~/github/sre-lab-infrastructure\nfi\n</code></pre></p> </li> <li> <p>Lancer le script :     <pre><code>~/github/sre-lab-infrastructure/scripts/common/bootstrap_client.sh\nsource ~/.bashrc\n</code></pre></p> </li> </ol> <p>Note : Le script est idempotent. Vous pouvez le relancer \u00e0 tout moment. Astuce : Par la suite, utilisez simplement l'alias <code>reload</code> pour mettre \u00e0 jour votre environnement.</p>"},{"location":"wsl/#4-configuration-post-installation-manuelle","title":"4. Configuration Post-Installation (Manuelle)","text":"<p>Certaines \u00e9tapes ne peuvent pas \u00eatre automatis\u00e9es car elles touchent \u00e0 vos secrets ou \u00e0 votre identit\u00e9 personnelle.</p>"},{"location":"wsl/#41-recuperation-des-cles-ssh","title":"4.1 R\u00e9cup\u00e9ration des Cl\u00e9s SSH","text":"<p>Le script de bootstrap configure automatiquement l'agent SSH (<code>keychain</code>) pour toutes les cl\u00e9s priv\u00e9es qu'il trouve dans <code>~/.ssh</code>.</p> <p>Il vous suffit donc de copier vos cl\u00e9s (depuis Windows par exemple) vers WSL :</p> <pre><code>mkdir -p ~/.ssh &amp;&amp; chmod 700 ~/.ssh\n\n# Remplacez 'VotreUserWindows' par votre nom d'utilisateur Windows\ncp /mnt/c/Users/VotreUserWindows/.ssh/id_rsa* ~/.ssh/\n\n# S\u00e9curisation des cl\u00e9s (Obligatoire)\nchmod 600 ~/.ssh/id_rsa\nchmod 644 ~/.ssh/id_rsa.pub\n</code></pre> <p>Important : Une fois les cl\u00e9s copi\u00e9es, lancez <code>reload</code> (ou relancez le script de bootstrap) pour qu'elles soient prises en compte par l'agent SSH.</p> <p>Astuce : Gestion de la Passphrase (ssh-add)</p> <p>Si votre cl\u00e9 est prot\u00e9g\u00e9e par une passphrase (recommand\u00e9), vous pouvez l'ajouter \u00e0 l'agent SSH pour ne la saisir qu'une seule fois par session : <pre><code>ssh-add ~/.ssh/votre_cle_privee\n</code></pre> C'est le compromis id\u00e9al entre s\u00e9curit\u00e9 (cl\u00e9 chiffr\u00e9e sur disque) et confort (pas de mot de passe \u00e0 chaque commande Git/SSH).</p>"},{"location":"wsl/#42-identite-git","title":"4.2 Identit\u00e9 Git","text":"<p>Configurez votre identit\u00e9 pour vos commits :</p> <pre><code>git config --global user.name \"Votre Nom\"\ngit config --global user.email \"votre.email@exemple.com\"\n</code></pre>"},{"location":"wsl/#43-connexion-ssh-sans-mot-de-passe-vers-le-serveur","title":"4.3 Connexion SSH sans mot de passe (Vers le Serveur)","text":"<p>Pour ne pas avoir \u00e0 saisir votre mot de passe \u00e0 chaque connexion vers le T420, vous devez autoriser votre cl\u00e9 SSH sur le serveur et configurer votre client SSH.</p> <p>1. Copie de la cl\u00e9 publique vers le serveur :</p> <p>Si votre cl\u00e9 a un nom standard (<code>id_rsa</code>), utilisez simplement : <pre><code>ssh-copy-id nicoperso@192.168.1.15\n</code></pre></p> <p>Si votre cl\u00e9 a un nom sp\u00e9cifique (ex: <code>nicolas.bailleul.wrk</code>), sp\u00e9cifiez-la avec l'option <code>-i</code> : <pre><code>ssh-copy-id -i ~/.ssh/nicolas.bailleul.wrk nicoperso@192.168.1.15\n</code></pre></p> <p>2. Configuration du fichier <code>~/.ssh/config</code> :</p> <p>Pour simplifier la commande de connexion (ex: <code>ssh t420</code> au lieu de <code>ssh -i ... nicoperso@...</code>), cr\u00e9ez ou \u00e9ditez le fichier <code>~/.ssh/config</code> :</p> <pre><code>nano ~/.ssh/config\n</code></pre> <p>Ajoutez-y le contenu suivant :</p> <pre><code>Host t420\n    HostName 192.168.1.15\n    User nicoperso\n    IdentityFile ~/.ssh/nicolas.bailleul.wrk  # Optionnel si nom standard\n</code></pre> <p>Vous pouvez maintenant vous connecter simplement avec : <pre><code>ssh t420\n</code></pre></p>"},{"location":"wsl/#5-utilisation-quotidienne","title":"5. Utilisation Quotidienne","text":"<p>Une fois install\u00e9, votre environnement est pr\u00eat.</p> <ul> <li>D\u00e9marrer le Lab : <code>start_lab</code> (Allume le serveur via Wake-on-LAN).</li> <li>Arr\u00eater le Lab : <code>bye</code> (\u00c9teint le serveur proprement).</li> <li>Mettre \u00e0 jour : <code>reload</code> (Met \u00e0 jour les scripts et la config).</li> </ul>"},{"location":"wsl/#6-sauvegarde-de-la-session-wsl-reference","title":"6. Sauvegarde de la session WSL (R\u00e9f\u00e9rence)","text":"<p>Commandes PowerShell pour sauvegarder/restaurer votre environnement complet.</p> <p>Sauvegarde : <pre><code>wsl --terminate Ubuntu\nwsl --export Ubuntu C:\\Sauvegardes\\wsl_backup_ubuntu.tar\n</code></pre></p> <p>Restauration : <pre><code>wsl --import UbuntuRestored C:\\WSL\\UbuntuRestored C:\\Sauvegardes\\wsl_backup_ubuntu.tar\n</code></pre></p>"},{"location":"wsl/#7-depannage","title":"7. D\u00e9pannage","text":""},{"location":"wsl/#erreur-au-demarrage-wslservice0x8007273d","title":"Erreur au d\u00e9marrage : Wsl/Service/0x8007273d","text":"<p>Si vous rencontrez l'erreur suivante au lancement de WSL :</p> <p>The attempted operation is not supported for the type of object referenced. Error code: Wsl/Service/0x8007273d</p> <p>Cause : Cette erreur est g\u00e9n\u00e9ralement caus\u00e9e par un conflit avec des logiciels tiers (Proxifier, VPN, etc.) qui modifient la pile r\u00e9seau via des Winsock Layered Service Providers (LSP).</p> <p>Solution : Il faut r\u00e9initialiser le catalogue Winsock.</p> <ol> <li>Ouvrir un terminal (PowerShell ou CMD) en tant qu'administrateur.</li> <li>Ex\u00e9cuter la commande :     <pre><code>netsh winsock reset\n</code></pre></li> <li>Red\u00e9marrer l'ordinateur.</li> </ol>"}]}